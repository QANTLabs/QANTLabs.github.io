<!DOCTYPE html>
<html>
{% include head.html %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<body>
    {% include navbar.html %}

    <section class="hero">
        <div class="hero-body">
            <div class="container has-text-centered" id="page-section">
                <div class="section">
                    {% if page.intro_image %}
                      <p class="has-text-centered">
                        <img alt="{{ page.title }}" src="{{ page.intro_image | relative_url }}" class="intro-image" />
                      </p>
                    {% endif %}

                    <h1 class="title is-1 has-text-weight-bold ptop-2">{{ page.title }}</h1>
                    {% if page.tagline %}
                      <p class="gsoc-subtitle">{{ page.tagline }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    <div class="container">
      <div class="section">
        <div class="content gsoc-content">{{ content }}</div>

        <!-- GSoC accordion -->
        {% assign ideas = site.pages | where_exp: "p", "p.path contains 'gsoc/ideas/'" | sort: 'title' %}
        {% for idea in ideas %}
          <div class="accordion">
            <span class="accordion-title">{{ idea.title }}</span>
            <span class="accordion-icon">
              <i class="fas fa-chevron-down"></i>
            </span>
          </div>
          <div class="panel">
            {{ idea.content }}
          </div>
        {% endfor %}

      </div>
    </div>

    {% include footer.html %}

    <script>
      (function() {
        var acc = document.getElementsByClassName("accordion");
        var i;

        for (i = 0; i < acc.length; i++) {
          acc[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var panel = this.nextElementSibling;
            var icon = this.querySelector('.accordion-icon i');

            if (panel.style.maxHeight) {
              panel.style.maxHeight = null;
              if (icon) icon.style.transform = 'rotate(0deg)';
            } else {
              panel.style.maxHeight = panel.scrollHeight + "px";
              if (icon) icon.style.transform = 'rotate(180deg)';
            }
          });
        }

        // Open all accordions by default
        window.addEventListener('load', function() {
          for (i = 0; i < acc.length; i++) {
            var panel = acc[i].nextElementSibling;
            var icon = acc[i].querySelector('.accordion-icon i');
            panel.style.maxHeight = panel.scrollHeight + "px";
            acc[i].classList.add("active");
            if (icon) icon.style.transform = 'rotate(180deg)';
          }
        });
      })();
    </script>
</body>

</html>
